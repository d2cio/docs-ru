# Вступление

D2C использует в качестве балансировщика [HAProxy](http://www.haproxy.org/). Он поддерживает разные протоколы: **HTTP**, **HTTPS**, **TCP**. Конфиг генерируется автоматически, в дальнейшем его можно изменять.

## Как развернуть балансировщика нагрузки

1. Разверните или откройте страницу сервиса, который нужно балансировать
2. Нажмите **Добавить балансировщика**
3. Выберите режим и сервер
4. Нажмите **Добавить балансировщика**

Если вы выберите HTTPS, то по умолчанию будет создан конфиг с бесплатными сертификатами от [Let's Encrypt](https://letsencrypt.org/). После разворачивания вы сможете  добавить свой сертификат. По необходимости можно указать любые дополнительные порты. Вы также можете выключит доступ из Интернета, который включен по умолчанию для HAProxy.

![Load balancing](../img/balancing.png)

![Load balancing - mode and ports](../img/balancing_mode_ports.png)

![Load balancing - choose a host](../img/balancing_hosts.png)

## Редактирование

Вы можете изменить настройки балансировщика после разворачивания. Для этого, откройте сервис HAProxy и нажмите **Редактировать**.

![Load balancing - editing](../img/balancing_editing.png)

Для того, чтобы изменить режим или добавить свой HTTPS сертификат найдите блок **Обслуживаемые сервисы**  и нажмите на иконку **Сгенерировать новый конфиг**.

![Load balancing - generate new config](../img/balancing_editing_new_config.png)

Выберите режим и нажмите **Сгенерировать новый конфиг**.

![Load balancing - choose a mode](../img/balancing_editing_new_config_2.png)

Если вам требуется HTTPS, вы можете добавить свой сертификат или использовать бесплатные автообновляемые сертификаты от Let's Encrypt.

Нажмите **Обновить сервис**.

![Load balancing - update](../img/balancing_editing_update.png)
