# Вступление

Сервисы не могут запускаться в Интернете без сервера. D2C может автоматически предоставлять их для вас. Просто предоставьте токен к облачному провайдеру, который будете использовать и D2C будет создавать, удалять, изменять конфигурацию (масштабировать) сервера по вашему требованию. Облачный провайдер будет списывать средства с вашего аккаунта в зависимости от потраченных ресурсов и используемого тарифа. D2C не предоставляет свои облачные ресурсы, а только автоматизирует процесс управления ресурсами облачных провайдеров.

Кроме того, вы можете разворачивать сервисы на собственных серверах или у облачных провайдеров, которые ещё не поддерживаются в D2C. Мы предоставляем скрипт, который проверяет совместимость сервера и добавляет его в вашу панель управления D2C.

Любой из серверов может использоваться для любого [проекта](/getting-started/projects/).

## Поддерживаемые операционные системы и требования

Когда вы создаете сервер мы устанавливаем на него **Ubuntu 16.04**.

Когда вы **подключаете** свой сервер он должен соответствовать следующим требованиям:

- Ubuntu 14.04/16.04 или Debian 8/9
- Версия ядра >= 4.0 для лучшей производительности Docker используя OverlayFS, в противном случае,  в качестве драйвера хранилища будет ["devicemapper"](https://docs.docker.com/engine/userguide/storagedriver/selectadriver/)
- Свободное место на диске: 5 Gb
- Открытый SSH порт
- Для работы с сетью Weave, требуется открыть порты 6783, 6784 (TCP/UDP)
- hostname должно быть уникально и не может называться "localhost"

!!! note

    D2C не поддерживает сервера с установленным Docker, в целях избегания конфликтов конфигураций.

## Как подключить свой сервер

1. Войдите в ваш [D2C аккаунт](https://panel.d2c.io/account/signup)
2. Нажмите **Подключить свой сервер**
3. Скопируйте команду
![Hosts](../img/hosts_connect_own.png)
4. Подключитесь к вашему серверу через **SSH**
5. Вставьте и запустите команду, которую скопировали до этого

## Поддерживаемые хостинг провайдеры

- Amazon Web Services ([инструкция по подключению AWS](/getting-started/cloud-providers/#amazon-web-services))
- DigitalOcean ([инструкция по подключению DigitalOcean](/getting-started/cloud-providers/#digital-ocean))
- Vultr ([инструкция по подключению Vultr](/getting-started/cloud-providers/#vultr))

Скоро будут доступны:

- Microsoft Azure

## ПО, которое устанавливается на сервер

- Docker
- Weave Network
- Telegraf
- D2C HealthCheck Daemon

## Действия

- Терминал
- Перезапустить
- Остановить (Запустить)
- Обновить системные сервисы
- Удалить (+удалить с форсом)
- [Изменить размер сервера](/platform/scaling/#_3) (только для облачных серверов)
- Изменить размер диска (для серверов AWS)

## AWS EBS

Амазон EC2 предоставляет дополнительно место  на диске которое называется [Amazon Elastic Block Storage](https://aws.amazon.com/ebs/?nc1=h_ls) (EBS). Вы можете изменять размер EBS без остановки серверов.

![EBS](../img/scaling_ebs.png)

## Демонстрационные сервера

Вы можете создать демонстрационный сервер для тестирования платформы.
Конфигурация сервера: t2.micro (1 GB, 1 x 2.4 GHz, 4GB SSD).
Регион: N. Virginia, The United States

Демонстрационный сервер создается на один час и будет удален после истечения этого времени со всеми сервисами и контейнерами. После этого вы сможете добавить новый на такой же срок.

## Логи

У каждого сервера есть логи (серверные логи).

Строчки, которые заканчиваются троеточием содержат дополнительную информацию, которую можно открыть с помощью клика мышки.

![Hosts](../img/host_logs.png)

## Подключение через SSH и SFTP

!!! note

    Один публичный ключ должен использоваться только один раз вне зависимости от его типа (SSH or SFTP). Если вам требуется изменить метод подключения, необходимо создать дополнительный публичный ключ или заменить добавленный.

Откройте терминал сервера и выполните следующие команды используя свои ключи.

[Как создать SSH ключи (инструкция BitBucket)](https://confluence.atlassian.com/bitbucketserver/creating-ssh-keys-776639788.html)

### Через SSH

```bash
SSH_KEY="your public key"
echo $SSH_KEY >> ~/.ssh/authorized_keys
```

### Через SFTP

```bash
SSH_KEY="your public key"
echo "restrict,command=\"sudo /usr/lib/openssh/sftp-server -d /ebs/containers\" $SSH_KEY" >> ~/.ssh/authorized_keys
```

## Данные сервисов

Все данные сервисов находятся в директории:
`/ebs/containers/serviceName`

Например, исходники вы можете найти в:
`/ebs/containers/serviceName/sources`

Бэкапы:
`/ebs/containers/serviceName/backup`

### Как выглядит страница сервера

![Hosts](../img/host_page.png)
![Hosts](../img/host_page2.png)
![Hosts](../img/host_page3.png)
